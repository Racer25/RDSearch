var ConnectionProvider=require("./ConnectionProvider");

var addPublication = function(publication)
{
    var connection=ConnectionProvider.getConnection();

    connection.connect(function(err) {
        if (err) {
            console.error('error connecting: ' + err.stack);
            return;
        }
        console.log('connected as id ' + connection.threadId);
    });

    var sql = "INSERT INTO publication(title, abstract, authors, doi, lastUpdateDate) "+
        "VALUES(?, ?, ?, ?, ?)";
    var inserts = [publication.title, publication.abstract, publication.authors, publication.doi, publication.lastUpdateDate];
    sql = mysql.format(sql, inserts);

    connection.query(sql, function (error, results, fields) {
        if (error) throw error;

        //console.log('The solution is: ', results[0].solution);
    });
    connection.end();
};

//exports.getPublication=getPublication;
//exports.getPublications=getPublications;
exports.addPublication=addPublication;
//exports.modifyPublication=modifyPublication;
//exports.deletePublication=deletePublication;